<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><title>Challenge 1 - Brain Tumor classification on Kaggle - Younes Belkada's blog</title><meta name=description content="Younes Belkada's blog"><meta property="og:title" content="Challenge 1 - Brain Tumor classification on Kaggle"><meta property="og:description" content="We decided with my friend Arthur Zucker to challenge ourselves into this Kaggle competition. The project looks quite exciting, with a serious and challenging application on a real-wolrd problem. According to the official Kaggle repository: A malignant tumor in the brain is a life-threatening condition. Known as glioblastoma, it&rsquo;s both the most common form of brain cancer in adults and the one with the worst prognosis, with median survival being less than a year."><meta property="og:type" content="article"><meta property="og:url" content="http://example.org/posts/brain_tumor/"><meta property="og:image" content="http://example.org/logo.png"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-07-27T00:00:00+00:00"><meta property="article:modified_time" content="2021-07-27T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://example.org/logo.png"><meta name=twitter:title content="Challenge 1 - Brain Tumor classification on Kaggle"><meta name=twitter:description content="We decided with my friend Arthur Zucker to challenge ourselves into this Kaggle competition. The project looks quite exciting, with a serious and challenging application on a real-wolrd problem. According to the official Kaggle repository: A malignant tumor in the brain is a life-threatening condition. Known as glioblastoma, it&rsquo;s both the most common form of brain cancer in adults and the one with the worst prognosis, with median survival being less than a year."><meta name=application-name content="FeelIt"><meta name=apple-mobile-web-app-title content="FeelIt"><meta name=theme-color content="#ffc40d"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=http://example.org/posts/brain_tumor/><link rel=next href=http://example.org/posts/imitation_learning/><link rel=stylesheet href=/css/page.min.css><link rel=stylesheet href=/css/home.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Challenge 1 - Brain Tumor classification on Kaggle","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"http:\/\/example.org\/posts\/brain_tumor\/"},"genre":"posts","keywords":"Challenges, Medical Image Analysis, Kaggle, Deep Learning","wordcount":906,"url":"http:\/\/example.org\/posts\/brain_tumor\/","datePublished":"2021-07-27T00:00:00+00:00","dateModified":"2021-07-27T00:00:00+00:00","publisher":{"@type":"Organization","name":"Younes Belkada"},"author":{"@type":"Person","name":"Younes Belkada"},"description":""}</script></head><body data-header-desktop data-header-mobile><script>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':'auto'==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:'auto'==='dark')&&document.body.setAttribute('theme','dark')</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Younes Belkada's blog">Younes Belkada's blog</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/about/>About </a><a class=menu-item href=/projects/>Projects </a><a class=menu-item href=/notes/>Notes </a><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/tags/>Tags </a><a class=menu-item href=/categories/>Categories </a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Younes Belkada's blog">Younes Belkada's blog</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a class=menu-item href=/about/ title>About</a><a class=menu-item href=/projects/ title>Projects</a><a class=menu-item href=/notes/ title>Notes</a><a class=menu-item href=/posts/ title>Posts</a><a class=menu-item href=/tags/ title>Tags</a><a class=menu-item href=/categories/ title>Categories</a><div class=menu-item><a href=javascript:void(0); class=theme-switch title="Switch Theme"><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single" data-toc=enable><div class=featured-image><img class=lazyload src=/svg/loading.min.svg data-src=/images/projects/brain.png data-srcset="/images/projects/brain.png, /images/projects/brain.png 1.5x, /images/projects/brain.png 2x" data-sizes=auto alt=/images/projects/brain.png title=/images/projects/brain.png></div><div class=single-card data-image=true><h2 class="single-title animated flipInX">Challenge 1 - Brain Tumor classification on Kaggle</h2><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=" author" class=author><i class="fas fa-user-circle fa-fw"></i>Younes Belkada</a></span>&nbsp;<span class=post-category>published in <a href=/categories/challenges/><i class="far fa-folder fa-fw"></i>Challenges</a>&nbsp;<a href=/categories/posts/><i class="far fa-folder fa-fw"></i>Posts</a></span></div><div class=post-meta-line><span><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2021-07-27>2021-07-27</time></span>&nbsp;<span><i class="fas fa-pencil-alt fa-fw"></i>&nbsp;906 words</span>&nbsp;
<span><i class="far fa-clock fa-fw"></i>&nbsp;5 minutes</span>&nbsp;</div></div><hr><div class="details toc" id=toc-static data-kept=true><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><ul><li><a href=#the-dataset>The dataset</a><ul><li><a href=#what-is-a-dicom-file>What is a DICOM file?</a></li><li><a href=#patient-data-as-a-video>Patient data as a video</a></li></ul></li><li><a href=#the-main-goal>The main goal</a><ul><li><a href=#the-challenges>The challenges</a></li></ul></li></ul></li></ul></nav></div></div><div class=content id=content><p>We decided with my friend <a href=https://arthurzucker.github.io/ target=_blank rel="noopener noreffer">Arthur Zucker</a> to challenge ourselves into this <a href=https://www.kaggle.com/c/rsna-miccai-brain-tumor-radiogenomic-classification/overview target=_blank rel="noopener noreffer">Kaggle competition</a>.
The project looks quite exciting, with a serious and challenging application on a real-wolrd problem. According to the official Kaggle repository: <em>A malignant tumor in the brain is a life-threatening condition. Known as glioblastoma, it&rsquo;s both the most common form of brain cancer in adults and the one with the worst prognosis, with median survival being less than a year. The presence of a specific genetic sequence in the tumor known as MGMT promoter methylation has been shown to be a favorable prognostic factor and a strong predictor of responsiveness to chemotherapy</em>.</p><h1 id=project-overview>Project overview</h1><p>The goal is to accurately predict if the patient which is victim of a malignant tumor has a presence of MGMT promoter methylation, given a set of different scan of the brain scan taken with 4 different image types called structural multi-parametric MRI (mpMRI) scans. This diagnose would help the doctors on which direction to go about the treatement of the patient.
The problem can be tackled in several ways that we will try to explore as much as we can !</p><h3 id=the-dataset>The dataset</h3><p>For any type of Data Science / Machine Learning problem, understanding the dataset is the <em><strong>most crucial</strong></em> part. To the best of our knowledge, the dataset consists with a set of labeled ~1000 patients data. As explained above, each patient has a different type of scan images. The image files are stored in the DICOM format. A good explanation of how to understand the DICOM files can be found <a href=https://www.researchgate.net/post/Deep_Learning_What_is_the_best_way_to_to_feed_dicom_files_into_object_detection_algorithm target=_blank rel="noopener noreffer">here</a>. I will try to give a brief explanation of what is a DICOM file.</p><h4 id=what-is-a-dicom-file>What is a DICOM file?</h4><p><a href=https://www.dicomstandard.org/ target=_blank rel="noopener noreffer">DICOM</a> is the international standard for medical images and related information, it is the best way for medical staff to display fine-grained information about the examined region. Each pixel intensity corresponds to a particular zone of the organ.</p><p>Classic images are stored in an array with values from range 0-255. Depending on the tool that is used to get the scan, the pixel arrays of the DICOM images are stored in a 0-4000 range.</p><p>This fact complexifies the problem since classic Deep Learning models for computer vision are trained on classic images, by normalizing the DICOM images we may lose some critical information contained in the scan.. <em><strong>or not.</strong></em> Hopefully the models will learn how to handle these images.</p><figure><a class=lightgallery href=/images/projects/scan_dicom.png title=/images/projects/scan_dicom.png data-thumbnail=/images/projects/scan_dicom.png data-sub-html="<h2>Example of a DICOM scan. Each pixel intensity is mapped to a particular region of the organ (skin, bone, etc.)</h2>"><img class=lazyload src=/svg/loading.min.svg data-src=/images/projects/scan_dicom.png data-srcset="/images/projects/scan_dicom.png, /images/projects/scan_dicom.png 1.5x, /images/projects/scan_dicom.png 2x" data-sizes=auto alt=/images/projects/scan_dicom.png height=600 width=600></a><figcaption class=image-caption>Example of a DICOM scan. Each pixel intensity is mapped to a particular region of the organ (skin, bone, etc.)</figcaption></figure><h4 id=patient-data-as-a-video>Patient data as a video</h4><p>To understand better the dataset, let&rsquo;s get a closer look at the structure of the data:</p><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-shell data-lang=shell>Training/Validation/Testing
│
└─── <span class=m>00000</span>
│   │
│   └─── FLAIR
│   │   │ Image-1.dcm
│   │   │ Image-2.dcm
│   │   │ ...
│   │   
│   └─── T1w
│   │   │ Image-1.dcm
│   │   │ Image-2.dcm
│   │   │ ...
│   │   
│   └─── T1wCE
│   │   │ Image-1.dcm
│   │   │ Image-2.dcm
│   │   │ ...
│   │   
│   └─── T2w
│   │   │ Image-1.dcm
│   │   │ Image-2.dcm
│   │   │ .....
│   
└─── <span class=m>00001</span>
│   │ ...
│   
│ ...   
│   
└─── <span class=m>00002</span>
│   │ ...                 
</code></pre></td></tr></table></div></div><p>Each patient, identified by its unique 5-digits id, contains 4 sub-folders corresponding to the scan type. The length of each folder has an arbitrary number of images, for e.g. the folder <code>00000/FLAIR</code> can have 400 images whereas the folder <code>00010/FLAIR</code> can have 325 images. Note also that the content of each folder is the frames of the video scan of the brain of the patient.</p><figure><a class=lightgallery href=/images/projects/brain.gif title="source: https://theaisummer.com/medical-image-coordinates/" data-thumbnail=/images/projects/brain.gif data-sub-html="<h2>Qualitative example of the frames that can be contained inside each sub-folder</h2><p>source: https://theaisummer.com/medical-image-coordinates/</p>"><img class=lazyload src=/svg/loading.min.svg data-src=/images/projects/brain.gif data-srcset="/images/projects/brain.gif, /images/projects/brain.gif 1.5x, /images/projects/brain.gif 2x" data-sizes=auto alt=/images/projects/brain.gif height=400 width=400></a><figcaption class=image-caption>Qualitative example of the frames that can be contained inside each sub-folder</figcaption></figure><h3 id=the-main-goal>The main goal</h3><p>The main goal can be summarized as follows: perform binary classification given a set of images.</p><p>The goal is a bit tricky. <em><strong>Why?</strong></em></p><p>Because classicaly, when performing binary classification the input is a single image (e.g. Dogs and Cat classification), in this case the input would be a set of <em><strong>arbitrary number of images</strong></em>, and the prediction would be the presence of MGMT promoter methylation. If successful, this would help brain cancer patients receive less invasive diagnoses and treatments.</p><h4 id=the-challenges>The challenges</h4><p>As stated before, for me the main challenge is to understand how to train a model that deals with this additional constraint of the different number of frames per subfolder. Different directions can be discussed:</p><ul><li>Use the mean image per subfolder and train a model using the mean image</li><li>Take a random image and pass it to the model</li><li>Transform each image to another space and pass it to a Sequential model (RNN, LSTM)</li><li>Transform each image into a 4d tensor and make use of 3d convolutional models</li></ul><h1 id=our-implementation>Our implementation</h1><p>Following this <a href=https://github.com/younesbelkada/BraTS_2021 target=_blank rel="noopener noreffer">github repo</a> you can find our implementation of the experiments that we have tried so far. Due to the lack of data (issue that has been raised by the participants of the challenge) we couldn&rsquo;t get an accuracy higher that ~60%. But this project allowed us to try several interesting approahces including a <em>MLP-Mixer</em>-like approach to treat the medical images.</p></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-tag><span><a href=/tags/challenges/>Challenges</a>
</span><span><a href=/tags/medical-image-analysis/>Medical Image Analysis</a>
</span><span><a href=/tags/kaggle/>Kaggle</a>
</span><span><a href=/tags/deep-learning/>Deep Learning</a></span></div><div class=post-info-line><div class=post-info-mod><span>Updated on 2021-07-27</span></div><div class=post-info-mod></div></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Linkedin" data-sharer=linkedin data-url=http://example.org/posts/brain_tumor/><i class="fab fa-linkedin fa-fw"></i></a><a href=javascript:void(0); title="Share on WhatsApp" data-sharer=whatsapp data-url=http://example.org/posts/brain_tumor/ data-title="Challenge 1 - Brain Tumor classification on Kaggle" data-web><i class="fab fa-whatsapp fa-fw"></i></a></span></div></div><div class=post-nav><a href=/posts/imitation_learning/ class=next rel=next title="Imitation Learning explained">Next Post<i class="fas fa-angle-right fa-fw"></i></a></div></div></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.85.0">Hugo</a> | Theme - <a href=https://github.com/khusika/FeelIt target=_blank rel="noopener noreffer" title="FeelIt 1.0.1"><i class="fas fa-hand-holding-heart fa-fw"></i> FeelIt</a></div><div class=footer-line itemscope itemtype=http://schema.org/CreativeWork><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2021</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/>Younes Belkada</a></span></div><a title="Real Time Web Analytics" href=http://clicky.com/101337009><img alt=Clicky src=//static.getclicky.com/media/links/badge.gif border=0></a>
<script async src=//static.getclicky.com/101337009.js></script><noscript><p><img alt=Clicky width=1 height=1 src=//in.getclicky.com/101337009ns.gif></p></noscript></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-chevron-up fa-fw"></i>
</a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment-alt fa-fw"></i></a></div><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><link rel=stylesheet href=/lib/lightgallery/lightgallery.min.css><link rel=stylesheet href=/lib/katex/katex.min.css><link rel=stylesheet href=/lib/katex/copy-tex.min.css><script src=/lib/lazysizes/lazysizes.min.js></script><script src=/lib/lightgallery/lightgallery.min.js></script><script src=/lib/lightgallery/lg-thumbnail.min.js></script><script src=/lib/lightgallery/lg-zoom.min.js></script><script src=/lib/clipboard/clipboard.min.js></script><script src=/lib/sharer/sharer.min.js></script><script src=/lib/katex/katex.min.js></script><script src=/lib/katex/auto-render.min.js></script><script src=/lib/katex/copy-tex.min.js></script><script src=/lib/katex/mhchem.min.js></script><script>window.config={code:{copyTitle:"Copy to clipboard",maxShownLines:10},comment:{},lightGallery:{actualSize:!1,exThumbImage:"data-thumbnail",hideBarsDelay:2e3,selector:".lightgallery",speed:400,thumbContHeight:80,thumbWidth:80,thumbnail:!0},math:{delimiters:[{display:!0,left:"$$",right:"$$"},{display:!0,left:"\\[",right:"\\]"},{display:!1,left:"$",right:"$"},{display:!1,left:"\\(",right:"\\)"}],strict:!1}}</script><script src=/js/theme.min.js></script></body></html>